$(function() {

	var clientWidth = document.body.clientWidth;

	

	$('.popup').magnificPopup({
		type: 'inline',

		fixedContentPos: false,
		fixedBgPos: true,

		overflowY: 'auto',

		closeBtnInside: true,
		preloader: false,

		showCloseBtn: true,
		
		midClick: true,
		removalDelay: 300,
		mainClass: 'my-mfp-slide-bottom'
	});


	$(".sccol__minus").click(function() {
		let count = $(this).parent().find(".sccol__input").val();

		if(count > 1 ) {
			count--;
			$(this).parent().find(".sccol__input").attr("value", count);
		}
	});

	$(".sccol__plus").click(function() {
		let count = $(this).parent().find(".sccol__input").val();
		
		count++;
		$(this).parent().find(".sccol__input").attr("value", count);
	});

	$('.dropdown-list').click(function () {
		$(this).toggleClass('dropdown-list_open');
	});

	$(document).mouseup(function (e){ 
		let div = $('.dropdown-list'); 
		if (!div.is(e.target) && div.has(e.target).length === 0) { 
			div.removeClass('dropdown-list_open');
		}
	});

	$('.filter-handler').click(function () {
		$('.filter-handler__burger').toggleClass('filter-handler__burger_open');
		$('.filter').slideToggle('fast');
		if (clientWidth > 991) {
			$('.main-category__filter-container').slideToggle('fast');
		}	
	});

	if (clientWidth <= 991) {
		$('.filter-handler__burger').removeClass('filter-handler__burger_open');
		$('.filter').hide();
	}

	$('.filter__item_collections').click(function () {
		$(this).toggleClass('filter__item-title_open');
		$(this).next().slideToggle('fast');
	});

	$('.filter__item_tags').click(function () {
		$(this).toggleClass('filter__item-title_open');
		$(this).next().slideToggle('fast');
	});

	$('.filter__item_types').click(function () {
		$(this).toggleClass('filter__item-title_open');
		$(this).next().slideToggle('fast');
	});		

	$('.colors__item').click(function () {
		$(this).toggleClass('colors__item_checked');
	});

	$('.slider-for').slick({
		slidesToShow: 1,
		slidesToScroll: 1,
		arrows: false,
		fade: true,
		asNavFor: '.slider-nav',
		responsive: [
		{
			breakpoint: 992,
			settings: {
				//centerMode: true,
				variableWidth: true,
				infinite: true,
				//dots: true,
				fade: false,
				focusOnSelect: true
			}
		},
		{
			breakpoint: 576,
			settings: {
				arrows: true,
				dots: true,
				fade: false,
				nextArrow: '<img src="{{ 'arrow-slider-right.png' | asset_url }}" class="slick-arrow_right">',
				prevArrow: '<img src="{{ 'arrow-slider-left.png' | asset_url }}" class="slick-arrow_left">',
			}
		}
		]
	});

	$('.slider-nav').slick({
		nextArrow: '<img class="slick-next" src="{{ 'slider-arr-down.png' | asset_url }}">',
		prevArrow: '<img class="slick-prev" src="{{ 'slider-arr-up.png' | asset_url }}">',
		slidesToShow: 3,
		slidesToScroll: 1,
		asNavFor: '.slider-for',
		focusOnSelect: true,
		verticalSwiping: true,
		vertical: true,
		arrows: true,
	});
	
    
	$(window).on('resize', function(){
		$('.slider-nav').slick('refresh')
	})


	$('.accordion__title').click(function () {
		$(this).toggleClass('accordion__title_open');
		$(this).next().slideToggle('fast');
	});

	

	$('.mobile-nav__item-search').click(function(e) {
		e.preventDefault();
		let query = $('.mobile-nav__input').val();
		if (query.length != 0) {
			$('.mobile-nav__search-form').submit();
		} else {
			$('.mobile-nav__input').toggleClass('mobile-nav__input_visible').focus();
			$('.logo').toggle();
		}
		
	});

	$('.main-nav__burger-container').click(function () {
		$(this).children().toggleClass('mobile-burger_open');
		$(".mobile-nav-wrapper").toggleClass('js-menu--is-open', 1000);
	});



	$("#customer-container-main-new-address__link").on("click", function(event){
       event.preventDefault();

	   $("#customer-container-main-form").toggle()
	});

	$("#customer-container-main-new-address__cancel").on("click", function(event){
       $("#customer-container-main-form").toggle()
	});
	

    // Initialize observers on address selectors, defined in shopify_common.js
    if (Shopify) {
      // eslint-disable-next-line no-new
      new Shopify.CountryProvinceSelector(
        'AddressCountryNew',
        'AddressProvinceNew',
        {
          hideElement: 'AddressProvinceContainerNew'
        }
      );
    }	

    $('.address-edit-toggle').on('click', function() {
      let formId = $(this).data('form-id');
      $('#EditAddress_' + formId).toggleClass('d-none');
	  $('#ContentAddress_' + formId).toggleClass('d-none');
    });	

    $('.address-delete').on('click', function() {
      var $el = $(this);
      var formId = $el.data('form-id');
      var confirmMessage = $el.data('confirm-message');

      // eslint-disable-next-line no-alert
      if (
        confirm(
          confirmMessage || 'Are you sure you wish to delete this address?'
        )
      ) {
        Shopify.postLink('/account/addresses/' + formId, {
          parameters: { _method: 'delete' }
        });
      }
    });	

    // Initialize each edit form's country/province selector
    $('.address-country-option').each(function() {
      let formId = $(this).data('form-id');
      let countrySelector = 'AddressCountry_' + formId;
      let provinceSelector = 'AddressProvince_' + formId;
      let containerSelector = 'AddressProvinceContainer_' + formId;
      	  
      
      // eslint-disable-next-line no-new
      new Shopify.CountryProvinceSelector(countrySelector, provinceSelector, {
        hideElement: containerSelector
      });
    });
});


$(window).on("scroll", function() {
   let allinone_bar_fixed = $("#allinone_bar_fixed");
  
   if (allinone_bar_fixed.length) { //already exists the div
       $("#shopify-section-header").css("margin-top", "50px");
   }
})



