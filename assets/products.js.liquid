function removeCharacteres(value) {
   let newValue = value; 
   newValue = newValue.toLowerCase();
   newValue = newValue.split("/").join("")
   newValue = newValue.split(" ").join("")
   
   return newValue;
}

function showColorLabel(type, labelText) {
  if (type == 'color') {
       $("#color-label").html(labelText)
       $("#color-label").show() 
  }
}





$(".option_to_select").on("click", function(event) {
   
   let idForDiagonal = "#diagonal_"+$(this).data("id");      
   if ($(idForDiagonal).css('display') != 'block') {
      $('#btn_to_add_cart').show()
      $("#sold-out-container").hide()
      

      let option_type = $(this).data("option");
      let option_value = $(this).data("value");

    
      showColorLabel(option_type, option_value)

      if ($.isNumeric(option_value) == false) {
    			option_value = option_value.split("/").join("")
          option_value = option_value.split(" ").join("")
      }
      
      let current_option_registered = $("#option_"+option_type+"_registered").val();
      $("#option_"+option_type+"_registered").val(option_value)
      
       

      mlfurs.applyFilters(option_type, option_value);  

      //Me falta controlar si estoy cambiando de tipo de filtro y ademas si el valor nuevo es diferente
      //al que est√° registrado
      

      
      if (mlfurs.validateIfAllFilterAreSelected() == true) {

        //validate if variant is available
        if (mlfurs.checkAvailableInVariantAvailablefunction() == false) {
            $("#sold-out-container").show()
            $('#btn_to_add_cart').hide()
        }        

      } else {
        $(".product-info__diagonal-line").hide();        
        for(filter in mlfurs.filters) {
          name = mlfurs.filters[filter];

          if (name == option_type) {
            continue;
          }

          filter_content = mlfurs.filter_available[name];

          let found = true;
          let id = "";
          let value = "";

          for(item in filter_content) {
              found = mlfurs.validateIfElementExist(name, filter_content[item]);

              if (found == true) {
                continue;
              }
              
              //show image
              value = removeCharacteres(filter_content[item])
              id = "#diagonal_option_"+name+"_"+value;

              $(id).show()          
          }
        }
      }
   } else {
     event.preventDefault();
     $("#sold-out-container").show()
     $('#btn_to_add_cart').hide()
   }
  
});


$(document).ready(function() {
    $('ul.product-info-tabs').each(function(){
      var active, content, links = $(this).find('a');
      active = links.first().addClass('active');
      content = $(active.attr('href'));
      links.not(':first').each(function () {
        $($(this).attr('href')).hide();
      });
      $(this).find('a').click(function(e){
        active.removeClass('active');
        content.hide();
        active = $(this);
        content = $($(this).attr('href'));
        active.addClass('active');
        content.show();
        return false;
      });
    });
  });
